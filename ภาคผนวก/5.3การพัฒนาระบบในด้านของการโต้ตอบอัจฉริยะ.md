# à¸à¸²à¸£à¸à¸±à¸’à¸™à¸²à¸£à¸°à¸šà¸šà¹ƒà¸™à¸”à¹‰à¸²à¸™à¸‚à¸­à¸‡à¸à¸²à¸£à¹‚à¸•à¹‰à¸•à¸­à¸šà¸­à¸±à¸ˆà¸‰à¸£à¸´à¸¢à¸°
## à¸£à¸°à¸šà¸šà¹à¸™à¸°à¸™à¸³à¸˜à¸¸à¸£à¸à¸´à¸ˆà¸­à¸±à¸ˆà¸‰à¸£à¸´à¸¢à¸° (SriKetGuide)
### à¸à¸²à¸£à¸šà¸¹à¸£à¸“à¸²à¸à¸²à¸£à¹€à¸—à¸„à¹‚à¸™à¹‚à¸¥à¸¢à¸µà¸›à¸±à¸à¸à¸²à¸›à¸£à¸°à¸”à¸´à¸©à¸à¹Œ (Artificial Intelligence)

---

## à¸ªà¸²à¸£à¸šà¸±à¸
1. [à¸ à¸²à¸à¸£à¸§à¸¡à¸£à¸°à¸šà¸šà¸›à¸±à¸à¸à¸²à¸›à¸£à¸°à¸”à¸´à¸©à¸à¹Œ](#1-à¸ à¸²à¸à¸£à¸§à¸¡à¸£à¸°à¸šà¸šà¸›à¸±à¸à¸à¸²à¸›à¸£à¸°à¸”à¸´à¸©à¸à¹Œ)
2. [à¸­à¸‡à¸„à¹Œà¸›à¸£à¸°à¸à¸­à¸šà¹€à¸—à¸„à¹‚à¸™à¹‚à¸¥à¸¢à¸µ AI à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰](#2-à¸­à¸‡à¸„à¹Œà¸›à¸£à¸°à¸à¸­à¸šà¹€à¸—à¸„à¹‚à¸™à¹‚à¸¥à¸¢à¸µ-ai-à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰)
3. [à¸£à¸°à¸šà¸šà¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸à¸´à¹ˆà¸¡/à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸à¸·à¹ˆà¸­à¸à¸²à¸£à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰à¸‹à¹‰à¸³à¹„à¸”à¹‰](#3-à¸£à¸°à¸šà¸šà¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸à¸´à¹ˆà¸¡à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸à¸·à¹ˆà¸­à¸à¸²à¸£à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰à¸‹à¹‰à¸³à¹„à¸”à¹‰)
4. [à¸£à¸°à¸šà¸šà¸ªà¸²à¸¡à¸²à¸£à¸–à¹à¸ªà¸”à¸‡à¸Šà¸¸à¸”à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¹à¸¥à¸°à¸à¸£à¸°à¸šà¸§à¸™à¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸”à¹‰](#4-à¸£à¸°à¸šà¸šà¸ªà¸²à¸¡à¸²à¸£à¸–à¹à¸ªà¸”à¸‡à¸Šà¸¸à¸”à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¹à¸¥à¸°à¸à¸£à¸°à¸šà¸§à¸™à¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸”à¹‰)
5. [à¸£à¸°à¸šà¸šà¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸à¹‡à¸šà¸œà¸¥à¸•à¸­à¸šà¸£à¸±à¸šà¸ˆà¸²à¸à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸‚à¸­à¸‡à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹„à¸”à¹‰](#5-à¸£à¸°à¸šà¸šà¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸à¹‡à¸šà¸œà¸¥à¸•à¸­à¸šà¸£à¸±à¸šà¸ˆà¸²à¸à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸‚à¸­à¸‡à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹„à¸”à¹‰)

---

## 1. à¸ à¸²à¸à¸£à¸§à¸¡à¸£à¸°à¸šà¸šà¸›à¸±à¸à¸à¸²à¸›à¸£à¸°à¸”à¸´à¸©à¸à¹Œ

### 1.1 à¸™à¸´à¸¢à¸²à¸¡à¸£à¸°à¸šà¸š
**à¸£à¸°à¸šà¸šà¹à¸™à¸°à¸™à¸³à¸˜à¸¸à¸£à¸à¸´à¸ˆà¸­à¸±à¸ˆà¸‰à¸£à¸´à¸¢à¸° (SriKetGuide)** à¹€à¸›à¹‡à¸™à¸£à¸°à¸šà¸šà¸›à¸±à¸à¸à¸²à¸›à¸£à¸°à¸”à¸´à¸©à¸à¹Œà¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¹€à¸—à¸„à¹‚à¸™à¹‚à¸¥à¸¢à¸µ AI à¹à¸šà¸šà¸šà¸¹à¸£à¸“à¸²à¸à¸²à¸£à¹€à¸à¸·à¹ˆà¸­:
- âœ… **Natural Language Understanding (NLU)**: à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¸„à¸³à¸–à¸²à¸¡à¸‚à¸­à¸‡à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹à¸šà¸šà¸˜à¸£à¸£à¸¡à¸Šà¸²à¸•à¸´
- âœ… **Semantic Search**: à¸„à¹‰à¸™à¸«à¸²à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸”à¹‰à¸§à¸¢à¸„à¸§à¸²à¸¡à¸«à¸¡à¸²à¸¢ à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆà¹à¸„à¹ˆà¸„à¸³à¸«à¸¥à¸±à¸
- âœ… **Generative AI**: à¸ªà¸£à¹‰à¸²à¸‡à¸„à¸³à¸•à¸­à¸šà¸—à¸µà¹ˆà¹€à¸«à¸¡à¸²à¸°à¸ªà¸¡à¹à¸¥à¸°à¹€à¸›à¹‡à¸™à¸˜à¸£à¸£à¸¡à¸Šà¸²à¸•à¸´
- âœ… **Context Awareness**: à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¸šà¸£à¸´à¸šà¸—à¸ˆà¸²à¸à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸à¸²à¸£à¸ªà¸™à¸—à¸™à¸²
- âœ… **Continuous Learning**: à¸›à¸£à¸±à¸šà¸›à¸£à¸¸à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸”à¹‰à¸­à¸¢à¹ˆà¸²à¸‡à¸•à¹ˆà¸­à¹€à¸™à¸·à¹ˆà¸­à¸‡

### 1.2 à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡ AI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SriKetGuide AI Architecture                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Input (Natural Language)
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Text Embedding (Vectorization)                         â”‚
â”‚     - à¹ƒà¸Šà¹‰ Ollama Embedding API                             â”‚
â”‚     - à¸ªà¸£à¹‰à¸²à¸‡ Vector 1536 dimensions                         â”‚
â”‚     - à¹à¸›à¸¥à¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹€à¸›à¹‡à¸™à¸•à¸±à¸§à¹€à¸¥à¸‚à¸—à¸µà¹ˆ AI à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆ                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. Semantic Search (pgvector)                             â”‚
â”‚     - à¸„à¹‰à¸™à¸«à¸²à¸”à¹‰à¸§à¸¢ Vector Similarity                          â”‚
â”‚     - à¹ƒà¸Šà¹‰ pgvector <-> operator                            â”‚
â”‚     - à¸„à¹‰à¸™à¸«à¸²à¹à¸šà¸šà¸„à¸§à¸²à¸¡à¸«à¸¡à¸²à¸¢ à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆà¹à¸„à¹ˆ keyword matching          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. Context Assembly (RAG - Retrieval Augmented Generation)â”‚
â”‚     - à¸£à¸§à¸¡à¸„à¸³à¸–à¸²à¸¡ + à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸ªà¸™à¸—à¸™à¸² + à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆà¸„à¹‰à¸™à¸à¸š             â”‚
â”‚     - à¸ªà¸£à¹‰à¸²à¸‡ Final Prompt à¸—à¸µà¹ˆà¸¡à¸µà¸šà¸£à¸´à¸šà¸—à¸„à¸£à¸šà¸–à¹‰à¸§à¸™                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. LLM Generation (Ollama llama3:8b)                      â”‚
â”‚     - à¸ªà¸£à¹‰à¸²à¸‡à¸„à¸³à¸•à¸­à¸šà¹à¸šà¸š Streaming Response                     â”‚
â”‚     - à¹ƒà¸Šà¹‰ Persona Prompt à¹€à¸à¸·à¹ˆà¸­à¸à¸³à¸«à¸™à¸”à¸šà¸¸à¸„à¸¥à¸´à¸ AI               â”‚
â”‚     - à¸•à¸­à¸šà¹à¸šà¸š Streaming à¹€à¸à¸·à¹ˆà¸­ UX à¸—à¸µà¹ˆà¸”à¸µà¸‚à¸¶à¹‰à¸™                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
Intelligent Response (Natural Thai Language)
```

### 1.3 à¹€à¸—à¸„à¹‚à¸™à¹‚à¸¥à¸¢à¸µ AI à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰

| à¹€à¸—à¸„à¹‚à¸™à¹‚à¸¥à¸¢à¸µ | à¹€à¸§à¸­à¸£à¹Œà¸Šà¸±à¸™ | à¸§à¸±à¸•à¸–à¸¸à¸›à¸£à¸°à¸ªà¸‡à¸„à¹Œ |
|-----------|---------|-------------|
| **Ollama LLM** | llama3:8b | Text Generation & Embeddings |
| **pgvector** | 0.5+ | Vector Similarity Search |
| **Redis + BullMQ** | Latest | Background Jobs Queue |
| **Streaming Response** | SSE | Real-time AI Response |

---

## 2. à¸­à¸‡à¸„à¹Œà¸›à¸£à¸°à¸à¸­à¸šà¹€à¸—à¸„à¹‚à¸™à¹‚à¸¥à¸¢à¸µ AI à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰

### 2.1 Natural Language Processing (NLP)

#### 2.1.1 Text Embedding
```javascript
// à¹„à¸Ÿà¸¥à¹Œ: src/controllers/chat.controller.js
// à¸à¸£à¸°à¸šà¸§à¸™à¸à¸²à¸£à¸ªà¸£à¹‰à¸²à¸‡ Vector à¸ˆà¸²à¸à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡

// 1. à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹„à¸›à¸¢à¸±à¸‡ Ollama Embedding API
const embeddingText = prompt;  // "à¹‚à¸£à¸‡à¹à¸£à¸¡à¸£à¸´à¸¡à¸—à¸°à¹€à¸¥à¹ƒà¸à¸¥à¹‰à¸«à¸²à¸”à¸›à¹ˆà¸²à¸•à¸­à¸‡"
const embResp = await axios.post(
  'http://ollama-embedder:11400/embeddings',
  { text: embeddingText }
);

// 2. à¹„à¸”à¹‰à¸£à¸±à¸š Vector (1536 dimensions)
const promptEmbedding = embResp.data.embedding;
// à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡: [0.1234, -0.5678, 0.9012, ..., 0.3456]  (1536 à¸•à¸±à¸§)

// 3. à¹ƒà¸Šà¹‰ Vector à¸™à¸µà¹‰à¹€à¸à¸·à¹ˆà¸­à¸„à¹‰à¸™à¸«à¸²à¹ƒà¸™à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥
```

**à¸„à¸§à¸²à¸¡à¸ªà¸³à¸„à¸±à¸:**
- à¹à¸›à¸¥à¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹€à¸›à¹‡à¸™à¸•à¸±à¸§à¹€à¸¥à¸‚à¸—à¸µà¹ˆ AI à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆ
- à¹€à¸à¹‡à¸šà¸„à¸§à¸²à¸¡à¸«à¸¡à¸²à¸¢à¸‚à¸­à¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡ (Semantic Meaning)
- à¹ƒà¸Šà¹‰à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¸„à¹‰à¸™à¸«à¸²à¹à¸šà¸šà¸„à¸§à¸²à¸¡à¸«à¸¡à¸²à¸¢

#### 2.1.2 LLM (Large Language Model)

```javascript
// à¹„à¸Ÿà¸¥à¹Œ: src/controllers/chat.controller.js
// à¸ªà¹ˆà¸‡ Prompt à¹„à¸›à¸¢à¸±à¸‡ Ollama LLM

const ollamaResponse = await axios.post(
  'http://host.docker.internal:11434/api/generate',
  {
    model: "llama3:8b",  // à¹ƒà¸Šà¹‰à¹‚à¸¡à¹€à¸”à¸¥ llama3 à¸‚à¸™à¸²à¸” 8B parameters
    prompt: finalPrompt,
    stream: true  // à¸ªà¹ˆà¸‡à¸à¸¥à¸±à¸šà¹à¸šà¸š Streaming
  },
  { responseType: 'stream' }
);

// à¸ªà¹ˆà¸‡à¸„à¸³à¸•à¸­à¸šà¹à¸šà¸š Streaming à¸à¸¥à¸±à¸šà¹„à¸›à¸¢à¸±à¸‡ Frontend
ollamaResponse.data.on('data', (chunk) => {
  const parsed = JSON.parse(chunk.toString());
  const content = parsed.response;
  res.write(`data: ${JSON.stringify({ content })}\n\n`);
});
```

**à¸„à¸¸à¸“à¸ªà¸¡à¸šà¸±à¸•à¸´:**
- âœ… à¸£à¸­à¸‡à¸£à¸±à¸šà¸ à¸²à¸©à¸²à¹„à¸—à¸¢
- âœ… à¸ªà¸£à¹‰à¸²à¸‡à¸„à¸³à¸•à¸­à¸šà¹à¸šà¸š Streaming (Real-time)
- âœ… à¹ƒà¸Šà¹‰ Context à¸ˆà¸²à¸à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸ªà¸™à¸—à¸™à¸²
- âœ… à¸£à¸±à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ˆà¸²à¸à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥

### 2.2 Semantic Search (Vector Similarity)

#### 2.2.1 pgvector Integration

```sql
-- à¸•à¸²à¸£à¸²à¸‡ businesses à¹ƒà¸Šà¹‰ pgvector
CREATE TABLE businesses (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255),
    description TEXT,
    embedding vector(1536),  -- â† Vector à¸ªà¸³à¸«à¸£à¸±à¸š semantic search
    created_at TIMESTAMP
);

-- à¸ªà¸£à¹‰à¸²à¸‡ index à¹€à¸à¸·à¹ˆà¸­à¹€à¸à¸´à¹ˆà¸¡à¸„à¸§à¸²à¸¡à¹€à¸£à¹‡à¸§à¹ƒà¸™à¸à¸²à¸£à¸„à¹‰à¸™à¸«à¸²
CREATE INDEX ON businesses 
USING ivfflat (embedding vector_cosine_ops)
WITH (lists = 100);
```

#### 2.2.2 Vector Similarity Search

```javascript
// à¹„à¸Ÿà¸¥à¹Œ: src/controllers/chat.controller.js
// à¸„à¹‰à¸™à¸«à¸²à¸”à¹‰à¸§à¸¢ Vector Similarity

const vecLiteral = JSON.stringify(promptEmbedding);
const rows = await sequelize.query(
  `SELECT 
      b.id,
      b.name,
      b.description,
      b.embedding <-> $1::vector as similarity,  -- â† Distance calculation
      p.name as package_name,
      CASE 
          WHEN p.name ILIKE '%premium%' THEN 1
          WHEN p.name ILIKE '%standard%' THEN 2
          ELSE 4
      END as package_tier
   FROM businesses b
   LEFT JOIN business_packages bp ON b.id = bp.business_id
   LEFT JOIN packages p ON bp.package_id = p.id
   WHERE b.is_active = true
   ORDER BY similarity ASC, package_tier ASC  -- à¹€à¸£à¸µà¸¢à¸‡à¸•à¸²à¸¡à¸„à¸§à¸²à¸¡à¸„à¸¥à¹‰à¸²à¸¢à¸„à¸¥à¸¶à¸‡
   LIMIT 10`,
  { bind: [vecLiteral], type: sequelize.QueryTypes.SELECT }
);
```

**à¸„à¸§à¸²à¸¡à¸«à¸¡à¸²à¸¢:**
- `<->` operator à¸„à¸·à¸­ cosine distance
- `similarity ASC` = à¸„à¹‰à¸™à¸«à¸²à¸˜à¸¸à¸£à¸à¸´à¸ˆà¸—à¸µà¹ˆ "à¸„à¸¥à¹‰à¸²à¸¢à¸à¸±à¸™à¸—à¸µà¹ˆà¸ªà¸¸à¸”" à¸à¸±à¸šà¸„à¸³à¸–à¸²à¸¡
- à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆ keyword matching à¹à¸•à¹ˆà¹€à¸›à¹‡à¸™ semantic similarity

**à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡:**
```
à¸„à¸³à¸–à¸²à¸¡: "à¹‚à¸£à¸‡à¹à¸£à¸¡à¸£à¸´à¸¡à¸—à¸°à¹€à¸¥à¹ƒà¸à¸¥à¹‰à¸«à¸²à¸”à¸›à¹ˆà¸²à¸•à¸­à¸‡"
â†’ Vector à¸‚à¸­à¸‡à¸„à¸³à¸–à¸²à¸¡

à¸„à¹‰à¸™à¸«à¸²: businesses à¸—à¸µà¹ˆ embedding à¸„à¸¥à¹‰à¸²à¸¢à¸à¸±à¸š vector à¸™à¸µà¹‰
â†’ à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ: à¹‚à¸£à¸‡à¹à¸£à¸¡à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¹ƒà¸à¸¥à¹‰à¸—à¸°à¹€à¸¥, à¹ƒà¸à¸¥à¹‰à¸«à¸²à¸”à¸›à¹ˆà¸²à¸•à¸­à¸‡, à¹‚à¸£à¸‡à¹à¸£à¸¡à¸£à¸´à¸¡à¸™à¹‰à¸³
```

### 2.3 Retrieval Augmented Generation (RAG)

#### 2.3.1 Context Assembly

```javascript
// à¹„à¸Ÿà¸¥à¹Œ: src/controllers/chat.controller.js
// à¸ªà¸£à¹‰à¸²à¸‡ Final Prompt à¸—à¸µà¹ˆà¸¡à¸µ Context à¸„à¸£à¸šà¸–à¹‰à¸§à¸™

// 1. à¸”à¸¶à¸‡à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸à¸²à¸£à¸ªà¸™à¸—à¸™à¸² (5 à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸¥à¹ˆà¸²à¸ªà¸¸à¸”)
const historyMessages = await ChatMessage.findAll({
    where: { session_id: session.id },
    order: [['created_at', 'DESC']],
    limit: 5
});

// 2. à¸”à¸¶à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ˆà¸²à¸à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ (Semantic Search)
const businesses = await findSimilarBusinesses(prompt);

// 3. à¸ªà¸£à¹‰à¸²à¸‡ Context
const retrievedContext = businesses.map(b => {
    return `Name: ${b.name}\nType: ${b.business_type}\nDescription: ${b.description}`;
}).join('\n\n---\n\n');

// 4. à¸ªà¸£à¹‰à¸²à¸‡ Final Prompt
const finalPrompt = `
${personaPrompt}

CONVERSATION HISTORY:
${formattedHistory}

CONTEXT FROM DATABASE:
${retrievedContext}

Based on all information, answer the user's latest message.
Your final response in Thai:
`;
```

**à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™ RAG:**
1. **Retrieval**: à¸„à¹‰à¸™à¸«à¸²à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆà¹€à¸à¸µà¹ˆà¸¢à¸§à¸‚à¹‰à¸­à¸‡
2. **Augmentation**: à¹€à¸à¸´à¹ˆà¸¡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸‚à¹‰à¸²à¹„à¸›à¹ƒà¸™ Prompt
3. **Generation**: à¸ªà¹ˆà¸‡à¹ƒà¸«à¹‰ LLM à¸ªà¸£à¹‰à¸²à¸‡à¸„à¸³à¸•à¸­à¸š

#### 2.3.2 Persona Prompt

```javascript
// à¹„à¸Ÿà¸¥à¹Œ: src/utils/persona-prompts.js

const defaultPersonaPrompt = `à¸„à¸¸à¸“à¹€à¸›à¹‡à¸™à¸à¸™à¸±à¸à¸‡à¸²à¸™à¸•à¹‰à¸­à¸™à¸£à¸±à¸šà¸‚à¸­à¸‡à¹‚à¸£à¸‡à¹à¸£à¸¡ 
à¸—à¸µà¹ˆà¸¡à¸µà¸„à¸§à¸²à¸¡à¹€à¸›à¹‡à¸™à¸à¸±à¸™à¹€à¸­à¸‡ à¸à¸¹à¸”à¸ˆà¸²à¸ªà¸¸à¸ à¸²à¸à¹à¸•à¹ˆà¹„à¸¡à¹ˆà¹€à¸›à¹‡à¸™à¸—à¸²à¸‡à¸à¸²à¸£

à¸à¸à¸ªà¸³à¸„à¸±à¸:
- à¸•à¸­à¸šà¸„à¸³à¸–à¸²à¸¡à¸ˆà¸²à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸™ CONTEXT à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™
- à¸«à¸²à¸à¸¡à¸µà¸£à¸¹à¸›à¸ à¸²à¸à¹ƒà¸™ CONTEXT à¹ƒà¸«à¹‰à¹à¸ªà¸”à¸‡ Markdown: ![à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢](URL)
- à¸«à¹‰à¸²à¸¡à¸ªà¸£à¹‰à¸²à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¸¡à¸µà¸­à¸¢à¸¹à¹ˆà¸ˆà¸£à¸´à¸‡
- à¸–à¹‰à¸²à¹„à¸¡à¹ˆà¹à¸™à¹ˆà¹ƒà¸ˆ à¹ƒà¸«à¹‰à¸šà¸­à¸à¸§à¹ˆà¸²à¸•à¹‰à¸­à¸‡à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¹€à¸à¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡

à¸§à¸´à¸˜à¸µà¸à¸²à¸£à¸•à¸­à¸š:
- à¹ƒà¸Šà¹‰à¹‚à¸—à¸™à¹€à¸ªà¸µà¸¢à¸‡à¹€à¸›à¹‡à¸™à¸à¸±à¸™à¹€à¸­à¸‡à¹à¸¥à¸°à¹ƒà¸«à¹‰à¸„à¸§à¸²à¸¡à¸Šà¹ˆà¸§à¸¢à¹€à¸«à¸¥à¸·à¸­
- à¸•à¸­à¸šà¹ƒà¸«à¹‰à¸•à¸£à¸‡à¸›à¸£à¸°à¹€à¸”à¹‡à¸™à¹à¸¥à¸°à¸à¸£à¸°à¸Šà¸±à¸š
- à¹€à¸ªà¸™à¸­à¸„à¸§à¸²à¸¡à¸Šà¹ˆà¸§à¸¢à¹€à¸«à¸¥à¸·à¸­à¹€à¸à¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡à¸«à¸²à¸à¹€à¸›à¹‡à¸™à¹„à¸›à¹„à¸”à¹‰`;
```

**à¸„à¸§à¸²à¸¡à¸ªà¸³à¸„à¸±à¸:**
- à¸à¸³à¸«à¸™à¸”à¸šà¸¸à¸„à¸¥à¸´à¸à¸‚à¸­à¸‡ AI
- à¸„à¸§à¸šà¸„à¸¸à¸¡à¸à¸¤à¸•à¸´à¸à¸£à¸£à¸¡à¸à¸²à¸£à¸•à¸­à¸š
- à¸›à¹‰à¸­à¸‡à¸à¸±à¸™à¸à¸²à¸£à¸ªà¸£à¹‰à¸²à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸›à¸¥à¸­à¸¡

### 2.4 Background Processing (Worker)

#### 2.4.1 BullMQ Queue

```javascript
// à¹„à¸Ÿà¸¥à¹Œ: src/worker/worker.js
// Worker à¸ªà¸³à¸«à¸£à¸±à¸šà¸ªà¸£à¹‰à¸²à¸‡ Embedding vectors

const worker = new Worker('embeddings', async job => {
  const { id, name, description, business_type } = job.data;
  
  // à¸ªà¸£à¹‰à¸²à¸‡ text à¸ªà¸³à¸«à¸£à¸±à¸š embedding
  const text = `${name} ${description} ${business_type}`;
  
  // à¸ªà¹ˆà¸‡à¹„à¸›à¸¢à¸±à¸‡ Ollama Embedding API
  const embedding = await getEmbedding(text);
  
  // à¸šà¸±à¸™à¸—à¸¶à¸à¸¥à¸‡à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥
  const vecLiteral = JSON.stringify(embedding);
  await pg.query(
    'UPDATE businesses SET embedding = $1::vector WHERE id = $2',
    [vecLiteral, id]
  );
  
  console.log(`Embedding created for business ${id}`);
});
```

**à¸›à¸£à¸°à¹‚à¸¢à¸Šà¸™à¹Œ:**
- âœ… à¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥à¹ƒà¸™ background (à¹„à¸¡à¹ˆà¸šà¸¥à¹‡à¸­à¸à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™à¸«à¸¥à¸±à¸)
- âœ… à¸£à¸­à¸‡à¸£à¸±à¸šà¸à¸²à¸£à¸£à¸µà¹€à¸—à¸£à¸µà¹ˆà¹€à¸¡à¸·à¹ˆà¸­à¸¥à¹‰à¸¡à¹€à¸«à¸¥à¸§
- âœ… à¸ªà¸²à¸¡à¸²à¸£à¸–à¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥à¹à¸šà¸šà¸‚à¸™à¸²à¸™

---

## 3. à¸£à¸°à¸šà¸šà¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸à¸´à¹ˆà¸¡/à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸à¸·à¹ˆà¸­à¸à¸²à¸£à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰à¸‹à¹‰à¸³à¹„à¸”à¹‰

### 3.1 à¸à¸²à¸£à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰à¸‹à¹‰à¸³ (Re-learning) à¸œà¹ˆà¸²à¸™ Vector Embeddings

#### 3.1.1 à¹€à¸à¸´à¹ˆà¸¡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸«à¸¡à¹ˆ

```bash
# 1. à¹€à¸à¸´à¹ˆà¸¡à¸˜à¸¸à¸£à¸à¸´à¸ˆà¹ƒà¸«à¸¡à¹ˆ
curl -X POST http://localhost:3000/api/businesses \
  -H "Authorization: Bearer <token>" \
  -d '{
    "name": "à¹‚à¸£à¸‡à¹à¸£à¸¡à¸¨à¸£à¸µà¹€à¸à¸©à¸à¸£à¸µà¸ªà¸­à¸£à¹Œà¸—",
    "description": "à¹‚à¸£à¸‡à¹à¸£à¸¡à¸£à¸´à¸¡à¸—à¸°à¹€à¸¥à¸ªà¸§à¸¢à¸‡à¸²à¸¡",
    "business_type": "à¹‚à¸£à¸‡à¹à¸£à¸¡"
  }'

# â†’ à¸£à¸°à¸šà¸šà¸ˆà¸°à¸šà¸±à¸™à¸—à¸¶à¸à¹ƒà¸™à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ (à¹à¸•à¹ˆ embedding = NULL)
```

```javascript
// 2. Job Queue à¸ªà¸£à¹‰à¸²à¸‡ embedding à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´
// à¹„à¸Ÿà¸¥à¹Œ: src/controllers/business.controller.js

const createBusiness = async (req, res) => {
  const business = await Business.create(req.body);
  
  // à¸ªà¹ˆà¸‡à¸‡à¸²à¸™à¸ªà¸£à¹‰à¸²à¸‡ embedding à¹„à¸›à¸¢à¸±à¸‡ Queue
  await embeddingsQueue.add('embed-business', {
    id: business.id,
    name: business.name,
    description: business.description,
    business_type: business.business_type
  });
  
  res.json(business);
};
```

```javascript
// 3. Worker à¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥à¹à¸¥à¸°à¸ªà¸£à¹‰à¸²à¸‡ embedding
// à¹„à¸Ÿà¸¥à¹Œ: src/worker/worker.js

const embedding = await getEmbedding(text);
// à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ: [0.123, -0.456, ..., 0.789] (1536 dimensions)

await pg.query(
  'UPDATE businesses SET embedding = $1::vector WHERE id = $2',
  [JSON.stringify(embedding), id]
);
```

#### 3.1.2 à¸­à¸±à¸›à¹€à¸”à¸•à¸‚à¹‰à¸­à¸¡à¸¹à¸¥

```bash
# à¹à¸à¹‰à¹„à¸‚à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸˜à¸¸à¸£à¸à¸´à¸ˆ
curl -X PUT http://localhost:3000/api/businesses/1 \
  -H "Authorization: Bearer <token>" \
  -d '{"name": "à¹‚à¸£à¸‡à¹à¸£à¸¡à¸¨à¸£à¸µà¹€à¸à¸©à¸£à¸µà¸ªà¸­à¸£à¹Œà¸— (à¸­à¸±à¸›à¹€à¸”à¸•)"}'

# â†’ à¸£à¸°à¸šà¸šà¸ˆà¸°à¸ªà¸£à¹‰à¸²à¸‡ embedding à¹ƒà¸«à¸¡à¹ˆà¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´
```

**à¸‚à¹‰à¸­à¸”à¸µ:**
- âœ… à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸«à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸„à¹‰à¸™à¸«à¸²à¹„à¸”à¹‰à¸—à¸±à¸™à¸—à¸µ
- âœ… à¸ªà¸£à¹‰à¸²à¸‡ embedding à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´à¸œà¹ˆà¸²à¸™ Worker
- âœ… à¹„à¸¡à¹ˆà¸šà¸¥à¹‡à¸­à¸à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™à¸«à¸¥à¸±à¸

#### 3.1.3 à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥

```sql
-- Soft Delete (à¹à¸™à¸°à¸™à¸³)
UPDATE businesses SET is_active = false WHERE id = 1;

-- Hard Delete (à¸£à¸°à¸§à¸±à¸‡!)
DELETE FROM businesses WHERE id = 1;
```

**à¸œà¸¥à¸à¸£à¸°à¸—à¸š:**
- Soft Delete: embedding à¸¢à¸±à¸‡à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™ DB à¹à¸•à¹ˆà¹„à¸¡à¹ˆà¹à¸ªà¸”à¸‡à¸œà¸¥
- Hard Delete: embedding à¸–à¸¹à¸à¸¥à¸šà¸–à¸²à¸§à¸£

### 3.2 à¸à¸²à¸£à¸ªà¸£à¹‰à¸²à¸‡ Embedding à¹ƒà¸«à¸¡à¹ˆà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” (Re-index)

```bash
# à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸ªà¸£à¹‰à¸²à¸‡ embedding à¹ƒà¸«à¸¡à¹ˆà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
curl -X POST http://localhost:3000/api/businesses/generate-embeddings \
  -H "Authorization: Bearer <token>"

# à¸«à¸£à¸·à¸­à¹ƒà¸Šà¹‰ Worker Script
docker-compose exec llm-chat-worker \
  node src/scripts/enqueue-embeddings.js
```

**à¸ªà¸„à¸£à¸´à¸›à¸•à¹Œ:**
```javascript
// à¹„à¸Ÿà¸¥à¹Œ: src/scripts/enqueue-embeddings.js

// à¸«à¸²à¸˜à¸¸à¸£à¸à¸´à¸ˆà¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¸¡à¸µ embedding
const businesses = await Business.findAll({ 
  where: { embedding: null } 
});

// à¸ªà¹ˆà¸‡à¹„à¸›à¸¢à¸±à¸‡ Queue à¸„à¸£à¸²à¸§à¸¥à¸° 100 à¸•à¸±à¸§
for (const business of businesses) {
  await embeddingsQueue.add('embed-business', {
    id: business.id,
    name: business.name,
    description: business.description
  });
}
```

### 3.3 à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™

**Scenario: à¹€à¸à¸´à¹ˆà¸¡à¹‚à¸£à¸‡à¹à¸£à¸¡à¹ƒà¸«à¸¡à¹ˆ**
```bash
# 1. à¹€à¸à¸´à¹ˆà¸¡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥
POST /api/businesses
â†’ Database: INSERT INTO businesses (name, description, embedding=NULL)

# 2. Queue à¸ªà¸£à¹‰à¸²à¸‡ embedding
Worker: à¸ªà¹ˆà¸‡ "à¹‚à¸£à¸‡à¹à¸£à¸¡à¹ƒà¸«à¸¡à¹ˆ" â†’ Ollama Embedding API
â†’ à¹„à¸”à¹‰ Vector: [0.1, 0.2, ..., 0.9] (1536 dimensions)

# 3. à¸šà¸±à¸™à¸—à¸¶à¸ Vector
UPDATE businesses SET embedding = '[0.1,0.2,...,0.9]' WHERE id = 123

# 4. à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹„à¸”à¹‰
User: "à¹‚à¸£à¸‡à¹à¸£à¸¡à¹ƒà¸«à¸¡à¹ˆ" â†’ Semantic Search â†’ à¹€à¸ˆà¸­à¹‚à¸£à¸‡à¹à¸£à¸¡ ID 123
```

---

## 4. à¸£à¸°à¸šà¸šà¸ªà¸²à¸¡à¸²à¸£à¸–à¹à¸ªà¸”à¸‡à¸Šà¸¸à¸”à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¹à¸¥à¸°à¸à¸£à¸°à¸šà¸§à¸™à¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸”à¹‰

### 4.1 à¸Šà¸¸à¸”à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¹à¸¥à¸°à¸à¸£à¸°à¸šà¸§à¸™à¸à¸²à¸£ AI

#### 4.1.1 Chat Process (9 à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. User Input: "à¹‚à¸£à¸‡à¹à¸£à¸¡à¸£à¸´à¸¡à¸—à¸°à¹€à¸¥"                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. Frontend: à¸ªà¹ˆà¸‡ POST /api/chat                 â”‚
â”‚     Body: { prompt, sessionId }                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. Session Management                            â”‚
â”‚     - à¸–à¹‰à¸²à¹„à¸¡à¹ˆà¸¡à¸µ sessionId â†’ à¸ªà¸£à¹‰à¸²à¸‡à¹ƒà¸«à¸¡à¹ˆ               â”‚
â”‚     - à¸–à¹‰à¸²à¸¡à¸µ sessionId â†’ à¹ƒà¸Šà¹‰ session à¹€à¸”à¸´à¸¡           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. Conversation History Retrieval                â”‚
â”‚     - à¸”à¸¶à¸‡ 5 à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸¥à¹ˆà¸²à¸ªà¸¸à¸”                        â”‚
â”‚     - Format: "user: ...", "assistant: ..."       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. Semantic Search (AI)                         â”‚
â”‚     a) à¸ªà¸£à¹‰à¸²à¸‡ embedding à¸ˆà¸²à¸à¸„à¸³à¸–à¸²à¸¡                  â”‚
â”‚     b) à¸„à¹‰à¸™à¸«à¸²à¸”à¹‰à¸§à¸¢ pgvector <->                    â”‚
â”‚     c) à¹€à¸£à¸µà¸¢à¸‡à¸•à¸²à¸¡ similarity + package tier        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  6. RAG Context Assembly                          â”‚
â”‚     - Persona Prompt                             â”‚
â”‚     - Conversation History                       â”‚
â”‚     - Business Data à¸—à¸µà¹ˆà¸„à¹‰à¸™à¸à¸š                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  7. LLM Generation (Ollama llama3:8b)            â”‚
â”‚     - à¸ªà¹ˆà¸‡ Prompt à¹„à¸›à¸¢à¸±à¸‡ Ollama                    â”‚
â”‚     - Stream: true (real-time response)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  8. Streaming Response                           â”‚
â”‚     - Frontend à¸£à¸±à¸š SSE chunks                    â”‚
â”‚     - à¹à¸ªà¸”à¸‡à¸œà¸¥à¹à¸šà¸š real-time                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  9. Save Messages                                â”‚
â”‚     - à¸šà¸±à¸™à¸—à¸¶à¸ user message                        â”‚
â”‚     - à¸šà¸±à¸™à¸—à¸¶à¸ assistant response                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.1.2 à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥

**1. à¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¸˜à¸¸à¸£à¸à¸´à¸ˆ (CRUD)**
```bash
# à¸ªà¸£à¹‰à¸²à¸‡à¸˜à¸¸à¸£à¸à¸´à¸ˆà¹ƒà¸«à¸¡à¹ˆ (à¸à¸£à¹‰à¸­à¸¡ auto-embedding)
curl -X POST http://localhost:3000/api/businesses \
  -H "Authorization: Bearer <token>" \
  -d '{
    "name": "à¹‚à¸£à¸‡à¹à¸£à¸¡à¹‚à¸£à¸‡à¹à¸£à¸¡à¹ƒà¸«à¸¡à¹ˆ",
    "description": "à¹‚à¸£à¸‡à¹à¸£à¸¡à¸ªà¸§à¸¢à¸‡à¸²à¸¡",
    "business_type": "à¹‚à¸£à¸‡à¹à¸£à¸¡"
  }'

# à¸­à¹ˆà¸²à¸™à¸˜à¸¸à¸£à¸à¸´à¸ˆà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
curl+SENDS http://localhost:3000/api/businesses

# à¸­à¸±à¸›à¹€à¸”à¸•à¸˜à¸¸à¸£à¸à¸´à¸ˆ
curl -X PUT http://localhost:3000/api/businesses/1 \
  -H "Authorization: Bearer <token>" \
  -d '{"name": "à¹‚à¸£à¸‡à¹à¸£à¸¡à¹ƒà¸«à¸¡à¹ˆ (à¹à¸à¹‰à¹„à¸‚)"}'

# Soft Delete
curl -X DELETE http://localhost:3000/api/businesses/1 \
  -H "Authorization: Bearer <token>"
```

**2. à¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£ Embedding**
```bash
# à¸ªà¸£à¹‰à¸²à¸‡ embedding à¸ªà¸³à¸«à¸£à¸±à¸šà¸˜à¸¸à¸£à¸à¸´à¸ˆà¸—à¸µà¹ˆà¸£à¸°à¸šà¸¸
curl -X POST http://localhost:3000/api/businesses/1/embedding/enqueue \
  -H "Authorization: Bearer <token>"

# à¸ªà¸£à¹‰à¸²à¸‡ embedding à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¹ƒà¸«à¸¡à¹ˆ
curl -X POST http://localhost:3000/api/businesses/generate-embeddings \
  -H "Authorization: Bearer <token>"
```

**3. à¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£ Chat**
```bash
# à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡
curl -X POST http://localhost:3000/api/chat \
  -H "Authorization: Bearer <token>" \
  -d '{"prompt": "à¹‚à¸£à¸‡à¹à¸£à¸¡à¹ƒà¸à¸¥à¹‰à¸—à¸°à¹€à¸¥", "sessionId": "xxx"}'

# à¸”à¸¶à¸‡à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¹à¸Šà¸—
curl http://localhost:3000/api/chat/sessions \
  -H "Authorization: Bearer <token>"

# à¸”à¸¶à¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹ƒà¸™à¸«à¹‰à¸­à¸‡
curl http://localhost:3000/api/chat/{sessionId}/messages \
  -H "Authorization: Bearer <token>"
```

#### 4.1.3 Docker Commands

```bash
# à¹€à¸£à¸´à¹ˆà¸¡à¸£à¸°à¸šà¸šà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
docker-compose -f docker-compose.dev.yml up -d

# à¸”à¸¹ logs AI service
docker-compose -f docker-compose.dev.yml logs -f llm-chat-api

# à¸”à¸¹ logs Worker (embedding jobs)
docker-compose -f docker-compose.dev.yml logs -f llm-chat-worker

# Restart AI API
docker-compose -f docker-compose.dev.yml restart llm-chat-api

# à¹€à¸‚à¹‰à¸² Worker container
docker-compose exec llm-chat-worker sh

# à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š embedding jobs
docker-compose exec llm-chat-worker redis-cli -h llm-chat-cache LLEN bull:embeddings:wait
```

### 4.2 à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™à¸ˆà¸£à¸´à¸‡

**Scenario 1: à¸à¸²à¸£à¸–à¸²à¸¡-à¸•à¸­à¸šà¸”à¹‰à¸§à¸¢ AI**
```bash
# 1. User à¸–à¸²à¸¡
POST /api/chat
Body: {"prompt": "à¹‚à¸£à¸‡à¹à¸£à¸¡à¸£à¸´à¸¡à¸—à¸°à¹€à¸¥à¹ƒà¸à¸¥à¹‰à¸«à¸²à¸”à¸›à¹ˆà¸²à¸•à¸­à¸‡"}

# 2. AI à¸—à¸³à¸à¸²à¸£
â†’ à¸ªà¸£à¹‰à¸²à¸‡ embedding: "à¹‚à¸£à¸‡à¹à¸£à¸¡à¸£à¸´à¸¡à¸—à¸°à¹€à¸¥..."
â†’ Vector: [0.1, 0.2, ..., 0.9]

# 3. à¸„à¹‰à¸™à¸«à¸²à¹à¸šà¸š semantic
SELECT * FROM businesses 
WHERE embedding <-> '[0.1,0.2,...,0.9]'::vector < 0.5
ORDER BY similarity ASC

# 4. à¸ªà¹ˆà¸‡à¹ƒà¸«à¹‰ LLM
â†’ Persona + History + Businesses
â†’ LLM à¸ªà¸£à¹‰à¸²à¸‡à¸„à¸³à¸•à¸­à¸š

# 5. Stream à¸à¸¥à¸±à¸šà¸¡à¸²
data: {"content": "à¸¡à¸µà¹‚à¸£à¸‡à¹à¸£à¸¡à¸”à¸±à¸‡à¸™à¸µà¹‰..."}
data: {"content": "  1. à¹‚à¸£à¸‡à¹à¸£à¸¡ ABC..."}
data: {"content": "  2. à¹‚à¸£à¸‡à¹à¸£à¸¡ XYZ..."}

# 6. à¸šà¸±à¸™à¸—à¸¶à¸
INSERT INTO chat_messages (role='assistant', content='...')
```

**Scenario 2: à¹€à¸à¸´à¹ˆà¸¡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸«à¸¡à¹ˆ + Re-index**
```bash
# 1. à¹€à¸à¸´à¹ˆà¸¡à¸˜à¸¸à¸£à¸à¸´à¸ˆà¹ƒà¸«à¸¡à¹ˆ
POST /api/businesses â†’ embedding = NULL

# 2. Worker à¸ªà¸£à¹‰à¸²à¸‡ embedding
Worker â†’ Ollama â†’ Vector [0.1, 0.2, ..., 0.9]

# 3. Update database
UPDATE businesses SET embedding = '[0.1,0.2,...,0.9]'

# 4. à¹ƒà¸Šà¹‰à¹„à¸”à¹‰à¸—à¸±à¸™à¸—à¸µ
User: "à¸£à¹‰à¸²à¸™à¸­à¸²à¸«à¸²à¸£à¹„à¸—à¸¢" â†’ Semantic Search â†’ à¹€à¸ˆà¸­à¸˜à¸¸à¸£à¸à¸´à¸ˆà¹ƒà¸«à¸¡à¹ˆ
```

---

## 5. à¸£à¸°à¸šà¸šà¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸à¹‡à¸šà¸œà¸¥à¸•à¸­à¸šà¸£à¸±à¸šà¸ˆà¸²à¸à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸‚à¸­à¸‡à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹„à¸”à¹‰

### 5.1 à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¹‚à¸•à¹‰à¸•à¸­à¸š

#### 5.1.1 Session & Message Storage

```javascript
// à¹„à¸Ÿà¸¥à¹Œ: src/controllers/chat.controller.js

// à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰
await ChatMessage.create({
    session_id: session.id,
    role: 'user',
    content: prompt
});

// à¸šà¸±à¸™à¸—à¸¶à¸à¸„à¸³à¸•à¸­à¸šà¸ˆà¸²à¸ AI
await ChatMessage.create({
    session_id: session.id,
    role: 'assistant',
    content: aiResponse
});
```

**à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥:**
```sql
chat_sessions
â”œâ”€â”€ id (UUID)
â”œâ”€â”€ user_id (UUID)
â”œâ”€â”€ title (VARCHAR)
â”œâ”€â”€ created_at
â””â”€â”€ updated_at

chat_messages
â”œâ”€â”€ id
â”œâ”€â”€ session_id (FK)
â”œâ”€â”€ role ('user' | 'assistant')
â”œâ”€â”€ content (TEXT)
â””â”€â”€ created_at
```

#### 5.1.2 à¸à¸²à¸£à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰

```javascript
// à¹„à¸Ÿà¸¥à¹Œ: src/controllers/analytics.controller.js

// à¸™à¸±à¸šà¸ˆà¸³à¸™à¸§à¸™ sessions à¸‚à¸­à¸‡à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰
const getUserSessionsCount = async (userId) => {
  return await ChatSession.count({
    where: { user_id: userId }
  });
};

// à¸«à¸²à¸„à¸³à¸–à¸²à¸¡à¸¢à¸­à¸”à¸™à¸´à¸¢à¸¡ (Top Queries)
const getTopQueries = async () => {
  return await ChatMessage.findAll({
    where: { role: 'user' },
    attributes: [
      'content',
      [sequelize.fn('COUNT', sequelize.col('content')), 'count']
    ],
    group: ['content'],
    order: [[sequelize.fn('COUNT', sequelize.col('content')), 'DESC']],
    limit: 10
  });
};
```

### 5.2 à¸à¸²à¸£à¹€à¸à¹‡à¸š Feedback

#### 5.2.1 Rating System

```sql
-- à¸•à¸²à¸£à¸²à¸‡ ratings
CREATE TABLE chat_session_ratings (
    id SERIAL PRIMARY KEY,
    session_id UUID REFERENCES chat_sessions(id),
    user_id UUID REFERENCES users(id),
    rating INTEGER CHECK (rating BETWEEN 1 AND 5),
    feedback TEXT,
    created_at TIMESTAMP
);
```

```javascript
// API: Submit Rating
const submitRating = async (req, res) => {
  const { sessionId, rating, feedback } = req.body;
  
  await Rating.create({
    session_id: sessionId,
    user_id: req.user.userId,
    rating,  // 1-5
    feedback  // à¹à¸ªà¸”à¸‡à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™à¹€à¸à¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡
  });
  
  res.json({ message: 'Rating submitted' });
};
```

#### 5.2.2 Click Tracking

```javascript
// à¸šà¸±à¸™à¸—à¸¶à¸à¸à¸²à¸£à¸„à¸¥à¸´à¸à¸˜à¸¸à¸£à¸à¸´à¸ˆà¸—à¸µà¹ˆ AI à¹à¸™à¸°à¸™à¸³
const trackBusinessClick = async (req, res) => {
  await Analytics.create({
    event_type: 'business_click',
    business_id: req.body.businessId,
    session_id: req.body.sessionId,
    user_id: req.user.userId
  });
};
```

### 5.3 à¸à¸²à¸£ Export à¸‚à¹‰à¸­à¸¡à¸¹à¸¥

```bash
# Export à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™
curl http://localhost:3000/api/analytics/export \
  -H "Authorization: Bearer <token>" \
  -o analytics.json

# Export à¹€à¸›à¹‡à¸™ CSV
curl "http://localhost:3000/api/analytics/export?format=csv" \
  -H "Authorization: Bearer <token>" \
  -o analytics.csv
```

**à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆ Export:**
```json
{
  "user_stats": {
    "total_sessions": 15,
    "total_messages": 87,
    "average_messages_per_session": 5.8
  },
  "top_queries": [
    {"query": "à¹‚à¸£à¸‡à¹à¸£à¸¡à¸£à¸´à¸¡à¸—à¸°à¹€à¸¥", "count": 12},
    {"query": "à¸£à¹‰à¸²à¸™à¸­à¸²à¸«à¸²à¸£à¹„à¸—à¸¢", "count": 8}
  ],
  "ratings": {
    "average": 4.5,
    "distribution": {"5": 10, "4": 5, "3": 2}
  }
}
```

### 5.4 à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™

**Scenario: à¸•à¸´à¸”à¸•à¸²à¸¡à¸›à¸£à¸°à¸ªà¸´à¸—à¸˜à¸´à¸ à¸²à¸ AI**

```bash
# 1. User à¸ªà¹ˆà¸‡à¸„à¸³à¸–à¸²à¸¡
POST /api/chat
{"prompt": "à¹‚à¸£à¸‡à¹à¸£à¸¡à¹ƒà¸à¸¥à¹‰à¸—à¸°à¹€à¸¥"}

# â†’ à¸šà¸±à¸™à¸—à¸¶à¸:
# - ChatSession: title="à¹‚à¸£à¸‡à¹à¸£à¸¡à¹ƒà¸à¸¥à¹‰à¸—à¸°à¹€à¸¥"
# - ChatMessage: role="user", content="à¹‚à¸£à¸‡à¹à¸£à¸¡à¹ƒà¸à¸¥à¹‰à¸—à¸°à¹€à¸¥"
# - ChatMessage: role="assistant", content="..."

# 2. User à¹ƒà¸«à¹‰à¸„à¸°à¹à¸™à¸™
POST /api/chat/ratings
{"sessionId": "xxx", "rating": 5, "feedback": "à¸”à¸µà¸¡à¸²à¸!"}

# 3. Analytics
GET /api/analytics/user-stats
{
  "total_sessions": 15,
  "average_rating": 4.5,
  "top_categories": ["à¹‚à¸£à¸‡à¹à¸£à¸¡", "à¸£à¹‰à¸²à¸™à¸­à¸²à¸«à¸²à¸£"]
}
```

---

## à¸ªà¸£à¸¸à¸›: à¸­à¸‡à¸„à¹Œà¸›à¸£à¸°à¸à¸­à¸š AI à¸—à¸µà¹ˆà¸„à¸£à¸šà¸–à¹‰à¸§à¸™

### âœ… 1. à¸£à¸°à¸šà¸šà¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸à¸´à¹ˆà¸¡/à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸à¸·à¹ˆà¸­à¸à¸²à¸£à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰æŠŠå°à¹„à¸”à¹‰
- âœ… **Embedding Generation**: à¸ªà¸£à¹‰à¸²à¸‡ Vector representations
- âœ… **Auto-reindex**: à¸ªà¸£à¹‰à¸²à¸‡ embedding à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´à¹€à¸¡à¸·à¹ˆà¸­à¹€à¸à¸´à¹ˆà¸¡/à¹à¸à¹‰à¸‚à¹‰à¸­à¸¡à¸¹à¸¥
- âœ… **Worker Jobs**: à¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥à¹à¸šà¸š background
- âœ… **Vector Updates**: à¸­à¸±à¸›à¹€à¸”à¸•à¹€à¸¡à¸·à¹ˆà¸­à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™

### âœ… 2. à¸£à¸°à¸šà¸šà¸ªà¸²à¸¡à¸²à¸£à¸–à¹à¸ªà¸”à¸‡à¸Šà¸¸à¸”à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¹à¸¥à¸°à¸à¸£à¸°à¸šà¸§à¸™à¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸”à¹‰
- âœ… **Semantic Search**: Vector similarity search
- âœ… **RAG Architecture**: Context assembly
- âœ… **Streaming Response**: Real-time AI generation
- âœ… **Command-line Tools**: API + Docker commands

### âœ… 3. à¸£à¸°à¸šà¸šà¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸à¹‡à¸šà¸œà¸¥à¸•à¸­à¸šà¸£à¸±à¸šà¸ˆà¸²à¸à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸‚à¸­à¸‡à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹„à¸”à¹‰
- âœ… **Session History**: à¹€à¸à¹‡à¸šà¸à¸²à¸£à¸ªà¸™à¸—à¸™à¸²à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
- âœ… **Analytics**: à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸à¸¤à¸•à¸´à¸à¸£à¸£à¸¡à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰
- âœ… **Rating System**: à¹€à¸à¹‡à¸š feedback
- âœ… **Export Capability**: à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥

### ğŸ¯ à¹€à¸—à¸„à¹‚à¸™à¹‚à¸¥à¸¢à¸µ AI à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰

| AI Component | Technology | Purpose |
|--------------|-----------|---------|
| **NLP** | Ollama Embedding | Text â†’ Vector |
| **LLM** | Ollama llama3:8b | Text Generation |
| **Vector DB** | PostgreSQL + pgvector | Semantic Search |
| **RAG** | Custom Implementation | Context Assembly |
| **Streaming** | SSE (Server-Sent Events) | Real-time Response |
| **Queue** | BullMQ | Background Jobs |

---

## à¹€à¸­à¸à¸ªà¸²à¸£à¸­à¹‰à¸²à¸‡à¸­à¸´à¸‡

- **System Architecture**: `HowtoUse.md`
- **API Documentation**: `README.md`
- **Database Schema**: `Databases-diagram.md`
- **Data Flow**: `Data-flow-diagram.md`

---

**à¸­à¸±à¸›à¹€à¸”à¸•à¸¥à¹ˆà¸²à¸ªà¸¸à¸”:** 28 à¸•à¸¸à¸¥à¸²à¸„à¸¡ 2567  
**Version:** 1.0.0  
**à¸œà¸¹à¹‰à¸à¸±à¸’à¸™à¸²:** SriKetGuide AI Team  
**License:** MIT

